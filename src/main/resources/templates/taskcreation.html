<!DOCTYPE html><html xmlns:th="https://www.thymeleaf.org" lang="ru"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <title>–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è</title>
    <link rel="stylesheet nofollow" href="/css/allstyle.css">
    <link rel="stylesheet nofollow" href="/usercss">
    <link rel="stylesheet nofollow" href="/css/tasksstyle.css">
    <script src="/js/main.js"></script>
    <script src="/js/settingsfn.js"></script>
    <script src="/js/tasksfn.js"></script>
</head>
<body>
<div class="upside-bar">
    <div class="overlay">
        <span class="overlaybutton">
            <a href="/">–ì–ª–∞–≤–Ω–∞—è</a>
        </span>
        <span class="overlaybutton">
            <a href="/tasks" >–ó–∞–¥–∞–Ω–∏—è</a>
        </span>
        <span class="overlaybutton" >
            <a href="/conferences">–ó–≤–æ–Ω–∫–∏</a>
        </span>
        <span class="overlaybutton" style="cursor: pointer">
            <a href="/journal">–ñ—É—Ä–Ω–∞–ª</a>
        </span>
        <span class="overlaybutton">
            <a href="/chats">–ß–∞—Ç—ã</a>
        </span>
        <span class="overlaybutton allsettings-button-show" style="justify-content: center;width: fit-content;padding-left: 4px;padding-right: 4px;position: relative">
            <a href="">üõ†</a>
               <div class="allsettings" style="display: none">
                    <span class="allsettings-button" onclick="fillSettingsContainer(allSettingsType.SETCSS)">–ó–∞–¥–∞—Ç—å CSS</span>
                </div>
        </span>
    </div>
</div>
<div class="info-messages" id="msginfo">
    <span class="info-messages-text">test</span>
</div>
<button type="button" class="allbuttons back-button" onclick="document.location.href='/tasks'">–ù–∞–∑–∞–¥</button>
<span class="page-header" th:text="${task!=null ? '–ò–ó–ú–ï–ù–ï–ù–ò–ï –ó–ê–î–ê–ù–ò–Ø':'–°–û–ó–î–ê–ù–ò–ï –ó–ê–î–ê–ù–ò–Ø'}"></span>
<div class="task-zone">
    <div class="task-name-field_">
        <label for="task_name">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è</label><br>
        <input type="text" id="task_name" th:value="${task!=null ? task.name:''}" required>
    </div>
    <div class="task-text-field" style="align-self: stretch">
        <label for="task_desc">–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è</label><br>
        <textarea maxlength="10000" name="text"  placeholder="–¢–µ–∫—Å—Ç..." id="task_desc" oninput="formCharCount('task_desc','task_feedback_char_count')" th:text="${task!=null ? task.text : ''}"></textarea>
        <span class="char-counter" id="task_feedback_char_count" style="width: fit-content;align-self: end;">0/10000</span>
    </div>
    <div class="task-date-field">
        <label for="task_date">–°—Ä–æ–∫ —Å–¥–∞—á–∏</label><br>
        <input type="datetime-local" id="task_date" th:value="${task!=null ? task.dateend:''}">
    </div>
    <div class="task-subject-field">
        <label for="subject_selector">–ü—Ä–µ–¥–º–µ—Ç</label>
        <br>
        <input id="subject_selector" type="text" list="subject_selector_list" th:value="${task!=null ? task.tasksubjectId.name:''}">
        <datalist id="subject_selector_list">
            <option th:each="subject: ${subjects}" th:value="${subject.name}"></option>
        </datalist>
    </div>
    <div class="task-group-field">
        <div>
            <label for="group_selector">–ì—Ä—É–ø–ø–∞</label>
            <br>
            <input id="group_selector" type="text" list="group_selector_list">
            <datalist id="group_selector_list">
                <option th:each="group: ${groups}" th:value="${group.name}"></option>
            </datalist>
        </div>
        <div id="group_list">
            <span th:if="${task!=null}">
                <span th:each="group: ${task.groups}" th:text="${group.name}+' '" th:id="'group_'+${group.id}" class="group-from-list" th:attr="onclick='deleteFromGroupList(\'group_'+${group.id}+'\')'"></span>
            </span>
        </div>
    </div>
    <br>
    <div class="task-input-zone">
        <input type="hidden" id="user_id" th:value="${user_id}">
        <input type="hidden" id="task_id" th:value="${task!=null ? task.id:''}">
        <div id="file_upload_zone_list">
            <label for="file_list">–§–∞–π–ª—ã: </label>
            <div style="display: flex;font-family: monospace;margin-top: 10px;flex-direction: row;flex-wrap: wrap;justify-content: flex-start;align-content: center" id="file_list" >
            </div>
        </div>
        <div class="file-upload-zone">
            <input type="file" id="attached_file" class="form-input" name="formfile" multiple>
            <div class="file-upload-zone-overlay">
                <span class="file-upload-icon">+</span>
                <span class="file-upload-label">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã</span>
            </div>
        </div>
    </div>
    <button type="button" class="allbuttons" style="width: 20vh;align-self: center;margin-top: 10px" th:text="${task!=null ? '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å':'–°–æ–∑–¥–∞—Ç—å'}" onclick="sendTaskToSv(null)">–°–æ–∑–¥–∞—Ç—å</button>
</div>
<div class="setting-container" style="display: none"></div>
</body>
</html>